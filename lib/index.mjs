function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(t,e,n=e){return t.set(n),e}function u(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d("")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:m(t,e,n)}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function y(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function v(t){x=t}function k(t){(function(){if(!x)throw new Error("Function called outside component initialization");return x})().$$.on_mount.push(t)}const w=[],_=[],q=[],E=[],M=Promise.resolve();let N=!1;function C(t){q.push(t)}let T=!1;const A=new Set;function L(){if(!T){T=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];v(e),z(e.$$)}for(v(null),w.length=0;_.length;)_.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];A.has(e)||(A.add(e),e())}q.length=0}while(w.length);for(;E.length;)E.pop()();N=!1,T=!1,A.clear()}}function z(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const O=new Set;function S(t,e){t&&t.i&&(O.delete(t),t.i(e))}function H(t,e){t.d(1),e.delete(t.key)}function R(t,e,n,o,i,s,r,c,u,l,a,f){let d=t.length,h=s.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],$=new Map,b=new Map;for(p=h;p--;){const t=f(i,s,p),c=n(t);let u=r.get(c);u?o&&u.p(t,e):(u=l(c,t),u.c()),$.set(c,g[p]=u),c in m&&b.set(c,Math.abs(p-m[c]))}const y=new Set,x=new Set;function v(t){S(t,1),t.m(c,a),r.set(t.key,t),a=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],o=e.key,i=n.key;e===n?(a=e.first,d--,h--):$.has(i)?!r.has(o)||y.has(o)?v(e):x.has(i)?d--:b.get(o)>b.get(i)?(x.add(o),v(e)):(y.add(i),d--):(u(n,r),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,r)}for(;h;)v(g[h-1]);return g}function j(t,e){-1===t.$$.dirty[0]&&(w.push(t),N||(N=!0,M.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(s,r,c,u,l,f,d=[-1]){const h=x;v(s);const p=s.$$={fragment:null,ctx:null,props:f,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:r.context||[]),callbacks:n(),dirty:d,skip_bound:!1};let m=!1;if(p.ctx=c?c(s,r.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&j(s,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!u&&u(p.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&S(s.$$.fragment),function(t,n,s,r){const{fragment:c,on_mount:u,on_destroy:l,after_update:a}=t.$$;c&&c.m(n,s),r||C((()=>{const n=u.map(e).filter(i);l?l.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(C)}(s,r.target,r.anchor,r.customElement),L()}v(h)}let F;"function"==typeof HTMLElement&&(F=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const I=[];function P(e,n=t){let o;const i=[];function r(t){if(s(e,t)&&(e=t,o)){const t=!I.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),I.push(n,e)}if(t){for(let t=0;t<I.length;t+=2)I[t][0](I[t+1]);I.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(s,c=t){const u=[s,c];return i.push(u),1===i.length&&(o=n(r)||t),s(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const D=P({}),G=P([]),J=P({});function K(t,e,n){const o=t.slice();return o[8]=e[n],o}function Q(t,e,n){const o=t.slice();return o[8]=e[n],o}function U(t){let e,n,o,i,s,r,c,p,m=t[1]+1+"",g="multi-choice"===t[4]?" [多选题] ":" ",b=t[0].title+"",y="input"===t[4]&&V(t),x="single-choice"===t[4]&&W(t),v="multi-choice"===t[4]&&Y(t);return{c(){e=f("h3"),n=d(m),o=d("."),i=d(g),s=d(b),y&&y.c(),r=h(),x&&x.c(),c=h(),v&&v.c(),p=h()},m(t,a){l(t,e,a),u(e,n),u(e,o),u(e,i),u(e,s),y&&y.m(t,a),l(t,r,a),x&&x.m(t,a),l(t,c,a),v&&v.m(t,a),l(t,p,a)},p(t,e){2&e&&m!==(m=t[1]+1+"")&&$(n,m),16&e&&g!==(g="multi-choice"===t[4]?" [多选题] ":" ")&&$(i,g),1&e&&b!==(b=t[0].title+"")&&$(s,b),"input"===t[4]?y?y.p(t,e):(y=V(t),y.c(),y.m(r.parentNode,r)):y&&(y.d(1),y=null),"single-choice"===t[4]?x?x.p(t,e):(x=W(t),x.c(),x.m(c.parentNode,c)):x&&(x.d(1),x=null),"multi-choice"===t[4]?v?v.p(t,e):(v=Y(t),v.c(),v.m(p.parentNode,p)):v&&(v.d(1),v=null)},d(t){t&&a(e),y&&y.d(t),t&&a(r),x&&x.d(t),t&&a(c),v&&v.d(t),t&&a(p)}}}function V(t){let e,n,i;return{c(){e=f("input")},m(o,s){l(o,e,s),b(e,t[2]),n||(i=[p(e,"input",t[6]),p(e,"input",t[5])],n=!0)},p(t,n){4&n&&e.value!==t[2]&&b(e,t[2])},d(t){t&&a(e),n=!1,o(i)}}}function W(t){let e,n=[],o=new Map,i=t[0].items;const s=t=>t[8].value;for(let e=0;e<i.length;e+=1){let r=Q(t,i,e),c=s(r);o.set(c,n[e]=X(c,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=h()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);l(t,e,o)},p(t,r){33&r&&(i=t[0].items,n=R(n,r,s,1,t,i,o,e.parentNode,H,X,e,Q))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function X(t,e){let n,o,i,s,r,c,h,g=e[8].label+"";return{key:t,first:null,c(){n=f("label"),o=f("input"),s=f("span"),r=d(g),m(o,"type","radio"),m(o,"name","question.id"),o.value=i=e[8].value,this.first=n},m(t,i){l(t,n,i),u(n,o),u(n,s),u(s,r),c||(h=p(o,"change",e[5]),c=!0)},p(t,n){e=t,1&n&&i!==(i=e[8].value)&&(o.value=i),1&n&&g!==(g=e[8].label+"")&&$(r,g)},d(t){t&&a(n),c=!1,h()}}}function Y(t){let e,n=[],o=new Map,i=t[0].items;const s=t=>t[8].value;for(let e=0;e<i.length;e+=1){let r=K(t,i,e),c=s(r);o.set(c,n[e]=Z(c,r))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=h()},m(t,o){for(let e=0;e<n.length;e+=1)n[e].m(t,o);l(t,e,o)},p(t,r){33&r&&(i=t[0].items,n=R(n,r,s,1,t,i,o,e.parentNode,H,Z,e,K))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&a(e)}}}function Z(t,e){let n,o,i,s,r,c,h,g=e[8].label+"";return{key:t,first:null,c(){n=f("label"),o=f("input"),s=f("span"),r=d(g),m(o,"type","checkbox"),m(o,"name","question.id"),o.value=i=e[8].value,this.first=n},m(t,i){l(t,n,i),u(n,o),u(n,s),u(s,r),c||(h=p(o,"change",e[5]),c=!0)},p(t,n){e=t,1&n&&i!==(i=e[8].value)&&(o.value=i),1&n&&g!==(g=e[8].label+"")&&$(r,g)},d(t){t&&a(n),c=!1,h()}}}function tt(e){let n,o=e[3]&&U(e);return{c(){o&&o.c(),n=h(),this.c=t},m(t,e){o&&o.m(t,e),l(t,n,e)},p(t,[e]){t[3]?o?o.p(t,e):(o=U(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}function et(t,e,n){let o,i,{question:s={}}=e,{index:r=0}=e,c="";return t.$$set=t=>{"question"in t&&n(0,s=t.question),"index"in t&&n(1,r=t.index)},t.$$.update=()=>{1&t.$$.dirty&&n(4,i=s.type||"input")},n(3,o=function(){const{props:t={}}=s,{showIf:e}=t;if(!e)return!0;const[n,o]=e.split("=");return J[n]===o}()),[s,r,c,o,i,function(t){const e=t.path[0],o=e.value;if("multi-choice"===i){const{checked:t}=e;if(c||n(2,c=[]),t){if(c.includes(o))return;const t=[...c,o];n(2,c=s.items.map((t=>t.value)).filter((e=>t.includes(e))))}else{const t=c.indexOf(o);if(t<0)return;c.splice(t,1)}}else n(2,c=o);console.log(c)},function(){c=this.value,n(2,c)}]}function nt(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function ot(t){let e,n,o=t[0].title+"";return{c(){e=f("h2"),n=d(o),m(e,"class","quiz-title")},m(t,o){l(t,e,o),u(e,n)},p(t,e){1&e&&o!==(o=t[0].title+"")&&$(n,o)},d(t){t&&a(e)}}}function it(t){let e,n,o=t[0].intro+"";return{c(){e=f("p"),n=d(o),m(e,"class","quiz-intro")},m(t,o){l(t,e,o),u(e,n)},p(t,e){1&e&&o!==(o=t[0].intro+"")&&$(n,o)},d(t){t&&a(e)}}}function st(t,e){let n,o,i;return{key:t,first:null,c(){n=f("question-item"),g(n,"question",o=e[3]),g(n,"index",i=e[5]),this.first=n},m(t,e){l(t,n,e)},p(t,s){e=t,2&s&&o!==(o=e[3])&&g(n,"question",o),2&s&&i!==(i=e[5])&&g(n,"index",i)},d(t){t&&a(n)}}}function rt(e){let n,o,i,s=[],r=new Map,c=e[0].title&&ot(e),d=e[0].intro&&it(e),p=e[1];const g=t=>t[3].id;for(let t=0;t<p.length;t+=1){let n=nt(e,p,t),o=g(n);r.set(o,s[t]=st(o,n))}return{c(){n=f("div"),c&&c.c(),o=h(),d&&d.c(),i=h();for(let t=0;t<s.length;t+=1)s[t].c();this.c=t,m(n,"class","quiz-wrap")},m(t,e){l(t,n,e),c&&c.m(n,null),u(n,o),d&&d.m(n,null),u(n,i);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){t[0].title?c?c.p(t,e):(c=ot(t),c.c(),c.m(n,o)):c&&(c.d(1),c=null),t[0].intro?d?d.p(t,e):(d=it(t),d.c(),d.m(n,i)):d&&(d.d(1),d=null),2&e&&(p=t[1],s=R(s,e,g,1,t,p,r,n,H,st,null,nt))},i:t,o:t,d(t){t&&a(n),c&&c.d(),d&&d.d();for(let t=0;t<s.length;t+=1)s[t].d()}}}function ct(t,e,n){let o,i;r(t,D,(t=>n(0,o=t))),r(t,G,(t=>n(1,i=t)));let{data:s=[]}=e;return k((()=>{setTimeout((()=>{console.log("mounted"),s&&(c(D,o=s,o),c(G,i=s.questions||[],i))}),100)})),t.$$set=t=>{"data"in t&&n(2,s=t.data)},[o,i,s]}customElements.define("question-item",class extends F{constructor(t){super(),this.shadowRoot.innerHTML="<style>label{display:block;width:100%;margin:4px 0;line-height:2em}label:hover{background-color:#f3f3f3}label span{margin-left:4px;user-select:none}</style>",B(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},et,tt,s,{question:0,index:1}),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["question","index"]}get question(){return this.$$.ctx[0]}set question(t){this.$set({question:t}),L()}get index(){return this.$$.ctx[1]}set index(t){this.$set({index:t}),L()}});class ut extends F{constructor(t){super(),this.shadowRoot.innerHTML="<style>.quiz-wrap{padding:0 30px}</style>",B(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},ct,rt,s,{data:2}),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[2]}set data(t){this.$set({data:t}),L()}}customElements.define("web-questionnaire",ut);export default ut;
